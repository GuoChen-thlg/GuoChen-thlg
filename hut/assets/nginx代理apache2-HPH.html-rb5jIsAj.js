import{_ as s,c as a,d as e,b as n,a as i,o as t}from"./app-Bg-rEz4_.js";const l="/hut/assets/nginx-BcO2aACM.jpg",p={},c=n("img",{src:l,alt:"nginx代理apache2-HPH"},null,-1),d=n("br",null,null,-1),r=i(`<h2 id="解除-443-端口占用" tabindex="-1"><a class="header-anchor" href="#解除-443-端口占用"><span>解除 443 端口占用</span></a></h2><p>修改 apache2 配置文件 /etc/apache2/ports.conf</p><p>将端口修改</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>...</span></span>
<span class="line"><span>&lt;IfModule ssl_module&gt;</span></span>
<span class="line"><span>	Listen 444</span></span>
<span class="line"><span>&lt;/IfModule&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;IfModule mod_gnutls.c&gt;</span></span>
<span class="line"><span>	Listen 444</span></span>
<span class="line"><span>&lt;/IfModule&gt;</span></span>
<span class="line"><span>...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改虚拟机配置文件 在 /etc/apache2/sites-enabled 下</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>...</span></span>
<span class="line"><span>&lt;VirtualHost _default_:444&gt;</span></span>
<span class="line"><span>...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改完成后 重启 apache2</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>/etc/init.d/apache2  restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>检查项目是否可以跑通 （加上端口号）</p><h2 id="设置-nginx-反向代理" tabindex="-1"><a class="header-anchor" href="#设置-nginx-反向代理"><span>设置 nginx 反向代理</span></a></h2><p>在 /etc/nginx/sites-available 目录下创建一个配置文件 复制默认文件的内容进行修改</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>...</span></span>
<span class="line"><span>server {</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>	listen 443 ssl default_server;</span></span>
<span class="line"><span>	ssl_certificate  /etc/nginx/cert/xxx.pem;</span></span>
<span class="line"><span>	ssl_certificate_key  /etc/nginx/cert/xxx.key;</span></span>
<span class="line"><span>	server_name  xxx.com;</span></span>
<span class="line"><span>	location / {</span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>		proxy_set_header Host $host;</span></span>
<span class="line"><span>		proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>		proxy_pass  https://xxx.xxx.xxx.xx:444;</span></span>
<span class="line"><span>		index index.php index.html index.htm index.nginx-debian.html;</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置软连接</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>ln -s /etc/nginx/sites-available/xxx.conf /etc/nginx/sites-enabled/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>重启 nginx</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>nginx -s reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>访问项目 查看是否反向代理成功</p>`,17);function o(u,m){return t(),a("div",null,[c,e(" > 背景：在公司部署项目的时候遇到端口冲突，原本服务器上跑着一个 php 项目使用的是 apache2 。"),d,e(" > 既然我使用nginx进行node反向代理，我也可以反向代理 apache2 "),r])}const h=s(p,[["render",o],["__file","nginx代理apache2-HPH.html.vue"]]),g=JSON.parse(`{"path":"/nginx%E4%BB%A3%E7%90%86apache2-HPH.html","title":"nginx反向代理apache2+HPH","lang":"zh-CN","frontmatter":{"title":"nginx反向代理apache2+HPH","tags":["nginx 反向代理"],"categories":["Nginx"],"copyright":true,"abbrlink":64100,"date":"2021-03-26T09:45:37.000Z","createTime":"2021-03-26T09:45:37.000Z","top":null,"description":"nginx代理apache2-HPH > 背景：在公司部署项目的时候遇到端口冲突，原本服务器上跑着一个 php 项目使用的是 apache2 。 > 既然我使用nginx进行node反向代理，我也可以反向代理 apache2 解除 443 端口占用 修改 apache2 配置文件 /etc/apache2/ports.conf 将端口修改 修改虚拟机配...","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"],["meta",{"property":"og:url","content":"https://blog.thlg.xyz/hut/nginx%E4%BB%A3%E7%90%86apache2-HPH.html"}],["meta",{"property":"og:site_name","content":"天火流光"}],["meta",{"property":"og:title","content":"nginx反向代理apache2+HPH"}],["meta",{"property":"og:description","content":"nginx代理apache2-HPH > 背景：在公司部署项目的时候遇到端口冲突，原本服务器上跑着一个 php 项目使用的是 apache2 。 > 既然我使用nginx进行node反向代理，我也可以反向代理 apache2 解除 443 端口占用 修改 apache2 配置文件 /etc/apache2/ports.conf 将端口修改 修改虚拟机配..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"nginx 反向代理"}],["meta",{"property":"article:published_time","content":"2021-03-26T09:45:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"nginx反向代理apache2+HPH\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-03-26T09:45:37.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"解除 443 端口占用","slug":"解除-443-端口占用","link":"#解除-443-端口占用","children":[]},{"level":2,"title":"设置 nginx 反向代理","slug":"设置-nginx-反向代理","link":"#设置-nginx-反向代理","children":[]}],"readingTime":{"minutes":0.93,"words":279},"git":{"updatedTime":null,"contributors":[]},"autoDesc":true,"filePathRelative":"nginx代理apache2-HPH.md","categoryList":[]}`);export{h as comp,g as data};
